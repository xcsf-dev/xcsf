---
# Configuration script for use with continuous integration service appveyor.com
image:
  - Visual Studio 2019

environment:
  matrix:
    - MINGW_ARCH: x86_64
      GENERATOR: MinGW Makefiles
      Compiler: MinGW64-gcc-8.1.0
      BINDIR: C:\mingw-w64\x86_64-8.1.0-posix-seh-rt_v6-rev0\mingw64\bin
      BUILD_TYPE: Release
      PYTHON_DIR: C:\Python310-x64
      CMAKE_ARGS: -DPARALLEL=ON -DXCSF_PYLIB=ON -DENABLE_TESTS=ON

before_build:
  # Workaround for CMake not wanting sh.exe on PATH for MinGW
  - set PATH=%PATH:C:\Program Files\Git\usr\bin;=%
  # Set MinGW and Python3 path
  - set "PATH=%PYTHON_DIR%;%PATH%;%BINDIR%;"
  - cd build
  - git submodule update --init --recursive
  - cmake --version
  - cmake -DCMAKE_BUILD_TYPE=%BUILD_TYPE% -DCMAKE_MAKE_PROGRAM=%BINDIR%\mingw32-make.exe %CMAKE_ARGS% -G "%GENERATOR%" ..


build_script: cmake --build . --config %BUILD_TYPE% -j2
...
